<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ConfiguraÃ§Ãµes - MOB</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- BotÃ£o hambÃºrguer -->
<div class="hamburger" id="hamburger">â˜°</div>

<!-- Menu lateral -->
<nav class="sidebar" id="sidebar">
  <div class="sidebar-title">MOB Menu</div>
  <a href="index.html">ğŸ  Dashboard</a>
  <a href="Registros.html">ğŸ“ Registros</a>
  <a href="calendario.html">ğŸ“… CalendÃ¡rio</a>
  <a href="Configuracoes.html">âš™ï¸ ConfiguraÃ§Ãµes</a>
</nav>

<!-- LOGO -->
<div class="logo-container">
  <img src="MOV.png" alt="Logo MOV" />
</div>

<h2 style="color:white; text-align:center;">ConfiguraÃ§Ãµes</h2>

<!-- EXPORTAR CSV -->
<div class="card">
  <h3>ğŸ“¤ Exportar Dados (CSV)</h3>
  <p>Baixe todos os registros do mÃªs atual em formato CSV.</p>
  <button id="btnExportar" style="width:100%;">Exportar CSV</button>
</div>

<!-- LIMPAR DADOS DO MÃŠS -->
<div class="card">
  <h3>ğŸ§¹ Limpar Dados do MÃªs</h3>
  <p>Apaga ganhos, gastos, transferÃªncias e mecÃ¢nicas do mÃªs selecionado.</p>
  <label>MÃªs Atual:</label>
  <select id="selectMesConfig"></select>
  <button id="btnLimparMes" class="btn-limpar" style="width:100%;">Limpar Dados do MÃªs</button>
</div>

<!-- LIMPAR TODOS OS MESES -->
<div class="card">
  <h3>âš ï¸ Limpar Tudo</h3>
  <p>Remove TODOS os meses e TODOS os dados do aplicativo.</p>
  <button id="btnLimparTudo" class="btn-limpar" style="width:100%;">Limpar Tudo</button>
</div>

<!-- SOBRE -->
<div class="card">
  <h3>â„¹ï¸ Sobre o Aplicativo</h3>
  <p><strong>MOB Controle de Corridas</strong></p>
  <p>VersÃ£o: 1.0</p>
  <p>Desenvolvido para controle completo de:</p>
  <ul>
    <li>Ganhos</li>
    <li>Gastos com gasolina</li>
    <li>TransferÃªncias</li>
    <li>Despesas mecÃ¢nicas</li>
    <li>Dias trabalhados</li>
  </ul>
</div>

<script src="menu.js"></script>
<script src="script.js"></script>

<script>
// Preenche lista de meses
window.addEventListener("DOMContentLoaded", () => {
  const select = document.getElementById("selectMesConfig");
  
  // Usamos a mesma funÃ§Ã£o que o Registros.html usa
  if (typeof listarMeses === "function") {
    const meses = listarMeses();
    const mesAtual = new Date().toISOString().slice(0,7);

    if (!meses.includes(mesAtual)) meses.unshift(mesAtual);

    meses.forEach(m => {
      const opt = document.createElement("option");
      opt.value = m;
      opt.textContent = m.split("-").reverse().join("/");
      select.appendChild(opt);
    });

    select.value = mesAtual;
  }

  // BotÃ£o limpar mÃªs
  document.getElementById("btnLimparMes").addEventListener("click", () => {
    const mes = select.value;

    if (confirm("Deseja realmente limpar os dados do mÃªs " + mes + "?")) {
      localStorage.removeItem("mob_" + mes);
      localStorage.removeItem("worked_" + mes);
      alert("Dados do mÃªs removidos!");
    }
  });

  // BotÃ£o limpar tudo
  document.getElementById("btnLimparTudo").addEventListener("click", () => {
    if (confirm("âš ï¸ Tem certeza? Isso apagarÃ¡ TODOS os dados do aplicativo.")) {
      localStorage.clear();
      alert("Todos os dados foram apagados.");
    }
  });
});
</script>

</body>
</html>
